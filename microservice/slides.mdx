import { Notes } from 'mdx-deck';
export { hack as theme } from '@mdx-deck/themes'

# Microservice?
## Microservice!

---

## The purpose of this sharing

Filtering and aggregation

---

## Table of Content

- WHAT: Terminology
- WHY: Disadvantages of the precedents
- HOW: Design a system
- Summary: Pros and Cons

---

## WHAT: Terminlogy

# Monolithic Architecture

<Notes>

A big chunk of software
Synchronized development & deployment period
Like... Splunk Enterprise

</Notes>

---

## WHAT: Terminlogy

# Service Oritented Architecture

<Notes>

Separate them into standalone services
Deployments are decoupled

</Notes>

---

## WHAT: Terminlogy

# Microservices Architecture

<Notes>

Don't start explaining it. Leave it for the next section

</Notes>

---

## WHAT: Definition of Microservice

- Definition 1: Size
- Definition 2: Independently deployable process
- Definition 3: mini REST-based web applications

---

## WHAT

What microservice based architecture really is?

<Notes>

A mindset, a design pattern
Business requirements are constantly changing
Code for business logic get old quickly
Microservices should be disposable

</Notes>

---

## WHY

Disadvantage of Monolithic Architecture

<Notes>

Tight coupling
Tech debt
Scalability

</Notes>

---

## WHY
Disadvantage of Service Oriented Architecture

<Notes>

Tech debt

</Notes>

---

## HOW: Principles

- Message-driven design process
- Keep the service-down in mind
- Prefer addition over modification

<Notes>

Because **Microservices should be disposable**

</Notes>


---

## HOW: Message-driven

Synchronous messages

---

## HOW: Message-driven

Asynchronous messages

---

## Live "Coding"

# Start-up: Fwiffer

---

## Iteration 0
# Requirements 

- Post an entry
- List all entries of a user

<Notes>

## Messages:

- entry:post
- entry:list
- store:add
- store:list
- [info:entry]

## Services:

- front
- entry
- entry-store

## Discuss:
- DB & xxx-store
- Message bus

</Notes>

---

## Iteration 1
# Requirements

- Search contents

<Notes>

Messages:

- search:insert
- search:query

### explain the decoupling
### new front roll-out

</Notes>

---

## Iteration 2
# Requirements

- Cache entries

<Notes>

## Addition > Modification

- Introduce a new service entry-cache

</Notes>

---

## Interation 3
# Requirements

- Users should be able to follow others
- Users should be able to see their own feeds

<Notes>

Messages:

## How to construct feeds?

- follow:add
- follow:list type:followers
- follow:list type:following
- feeds:list
- feeds:add

Services:

- follow
- feeds

</Notes>

---

## Iteration 4
# Requirements

- Scale the "feeds-store" service

<Notes>

## Isn't database sharding good enought?

</Notes>

---

## Summary: Advantages

- Low tech debt
- Low to zero coupling (between microservices)
- Partial Scaling
- Language independent

---

## Summary: Disadvantage

- Deployment complexity
- Traffic cost
- Reduce of reliability
- Architecture design is much important

---

## Final words

Monolithic <==> Microservices

<Notes>

They are not againsting each other like black and white
Microservice-based architecture is more like a best practice to design a system
Less structure flexibility (compare to Monolithic)

</Notes>
