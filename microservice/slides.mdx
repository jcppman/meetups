import { Notes } from 'mdx-deck';
export { hack as theme } from '@mdx-deck/themes'

# Microservice?
## Microservice!

---

## The purpose of this sharing

Filtering and aggregation

---

## Table of Content

- WHAT: Monolithic? Service-based? Microservice???
- WHY: Disadvantages of the two precedents
- HOW: Design a system
- Summary: Pros and Cons of Microservice-based Architecture

---

## WHAT: History

- Monolithic Architecture

<Notes>

A big chunk of software
Synchronized development & deployment period
Like... Splunk Enterprise

</Notes>

- Service Oritented Architecture

<Notes>

Separate them into standalone services
Deployments are decoupled

</Notes>

- Microservices Architecture

<Notes>

Don't start explaining it. Leave it for the next section

</Notes>

---

## WHY

Disadvantage of Monolithic Architecture

<Notes>

Tight coupling
Tech debt
Scalability

</Notes>

---

## WHY
Disadvantage of Service Oriented Architecture

<Notes>

Tech debt

</Notes>

---

## WHAT: Definition

- Definition 1: Size
- Definition 2: Independently deployable process
- Definition 3: mini REST-based web applications

---

## WHAT

What microservice based architecture really is?

<Notes>

A mindset, a design pattern
Business requirements are constantly changing
Code for business logic get old quickly
Microservices should be disposable

</Notes>

---

## HOW: Principles

- Message-driven design process

<Notes>

Because **Microservices should be disposable**

</Notes>

- Keep the service-down in mind

---

## HOW: Message-driven

Synchronous messages

---

## HOW: Message-driven

Asynchronous messages

---

# Live "Coding"

---

## Iteration 0
# Requirements 

- Post an entry
- List all entries of a user
- Get one entry
- Remove an entry

<Notes>

## Messages:

- post:entry user:id content:content
- entry:list
- entry:save
- [info:entry]

## Services:

- front
- post
- entry-store

</Notes>

---

## Iteration 1
# Requirements

- Search contents

<Notes>

Messages:

- search:insert
- search:query

### explain the decoupling
### new front roll-out

</Notes>

---

## Iteration 2
# Requirements

- Cache entries

<Notes>

- Introduce a new service entry-cache
- Update entry-store

</Notes>

---

## Interation 3
# Requirements

- Users should be able to follow others
- Users should be able to see their own timelines

<Notes>

Messages:

## How to construct timeline?

- follow:add
- follow:list type:followers
- follow:list type:following
- timeline:view
- timeline:insert

Services:

- follow
- timeline
- construct-timeline

</Notes>

---

## Iteration 4
# Requirements

- Scale the "timeline" service

<Notes>

## Isn't database sharding good enought?

</Notes>

---

## Iteration 5
# Requirements

- Advertisements

---

## Summary: Advantages

- Built-in failure tolerance mechanism
- Services are scalable & swapable
- Low tech debt
- Language independent

---

## Summary: Disadvantage

- Deployment complexity
- Traffic cost
- Reduce of reliability
- Architecture design is much important

---

## FInal words

Monolithic <==> Microservices

<Notes>

They are not againsting each other like black and white
Microservice-based architecture is more like a best practice to design a system
Less structure flexibility (compare to Monolithic)

</Notes>
